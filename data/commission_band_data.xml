<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Cron Job for Pending Commission Calculations -->
        <record id="ir_cron_calculate_pending_commissions" model="ir.cron">
            <field name="name">Commission Band: Calculate Pending Commissions</field>
            <field name="model_id" ref="account.model_account_payment"/>
            <field name="state">code</field>
            <field name="code">model._cron_calculate_pending_commissions()</field>
            <field name="user_id" ref="base.user_root"/>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>
        
        <!-- Cron Job for Auto-validation of Commissions -->
        <record id="ir_cron_validate_commissions" model="ir.cron">
            <field name="name">Commission Band: Auto-validate Commissions</field>
            <field name="model_id" ref="commission_band.model_commission_calculation"/>
            <field name="state">code</field>
            <field name="code">model.cron_validate_commissions()</field>
            <field name="user_id" ref="base.user_root"/>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="False"/>
            <field name="doall" eval="False"/>
        </record>
        
        <!-- Email Template for Commission Approval -->
        <record id="email_template_commission_approval" model="mail.template">
            <field name="name">Commission Band: Approval Required</field>
            <field name="model_id" ref="commission_band.model_commission_calculation"/>
            <field name="subject">Commission Approval Required - ${object.display_name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="partner_to">${object.salesperson_id.partner_id.id}</field>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF;">
    <p>Hello ${object.salesperson_id.name},</p>
    
    <p>A new commission calculation requires approval:</p>
    
    <ul>
        <li><strong>Customer:</strong> ${object.partner_id.name}</li>
        <li><strong>Invoice:</strong> ${object.invoice_id.name}</li>
        <li><strong>Payment:</strong> ${object.payment_id.name}</li>
        <li><strong>Payment Date:</strong> ${object.payment_date}</li>
        <li><strong>Days Overdue:</strong> ${object.days_overdue}</li>
        <li><strong>Commission Amount:</strong> ${object.commission_amount} ${object.currency_id.symbol}</li>
    </ul>
    
    <p>Please review and approve this commission calculation.</p>
    
    <p>Thank you,<br/>
    ${object.company_id.name}</p>
</div>
]]>
            </field>
            <field name="auto_delete" eval="True"/>
        </record>
        
        <!-- Email Template for Commission Payment -->
        <record id="email_template_commission_paid" model="mail.template">
            <field name="name">Commission Band: Commission Paid</field>
            <field name="model_id" ref="commission_band.model_commission_calculation"/>
            <field name="subject">Commission Paid - ${object.display_name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="partner_to">${object.salesperson_id.partner_id.id}</field>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF;">
    <p>Hello ${object.salesperson_id.name},</p>
    
    <p>Your commission has been paid:</p>
    
    <ul>
        <li><strong>Customer:</strong> ${object.partner_id.name}</li>
        <li><strong>Invoice:</strong> ${object.invoice_id.name}</li>
        <li><strong>Payment Date:</strong> ${object.payment_date}</li>
        <li><strong>Commission Amount:</strong> ${object.commission_amount} ${object.currency_id.symbol}</li>
    </ul>
    
    <p>Thank you for your excellent work!</p>
    
    <p>Best regards,<br/>
    ${object.company_id.name}</p>
</div>
]]>
            </field>
            <field name="auto_delete" eval="True"/>
        </record>
        
    </data>
</odoo>